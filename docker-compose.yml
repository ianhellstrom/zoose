version: '2'
services:
  base:
    image: "${BASE}"
    build:
      context: base
      dockerfile: Dockerfile
      args:
        SOURCE: "ubuntu:24.04"
    ports:
      - "8888:8888"
  base-gitpod:
    image: "${PREFIX}-base-gitpod"
    build:
      context: gitpod
      dockerfile: Dockerfile
      args:
        BASE: "${BASE}"
    depends_on:
      - base
  neo4j:
    image: "${PREFIX}-neo4j"
    build:
      context: neo4j
      dockerfile: Dockerfile
      args:
        BASE: "${BASE}"
    depends_on:
      - base
    ports:
      - "7473:7373"
      - "7474:7474"
      - "7687:7686"
  pytorch:
    image: "${PREFIX}-pytorch"
    build:
      context: pytorch
      dockerfile: Dockerfile
      args:
        BASE: "${BASE}"
    depends_on:
      - base
  pytorch-gitpod:
    image: "${PREFIX}-pytorch-gitpod"
    build:
      context: gitpod
      dockerfile: Dockerfile
      args:
        BASE: "${PREFIX}-pytorch"
    depends_on:
      - base
  quantum:
    image: "${PREFIX}-quantum:${TAG}"
    build:
      context: quantum
      dockerfile: Dockerfile
      args:
        BASE: "${BASE}"
    depends_on:
      - base
  quantum-gitpod:
    image: "${PREFIX}-quantum-gitpod"
    build:
      context: gitpod
      dockerfile: Dockerfile
      args:
        BASE: "${PREFIX}-quantum"
    depends_on:
      - base
  geo:
    image: "${PREFIX}-geo"
    build:
      context: geo
      dockerfile: Dockerfile
      args:
        BASE: "${BASE}"
    depends_on:
      - base
  geo-gitpod:
    image: "${PREFIX}-geo-gitpod"
    build:
      context: gitpod
      dockerfile: Dockerfile
      args:
        BASE: "${PREFIX}-geo"
    depends_on:
      - base
